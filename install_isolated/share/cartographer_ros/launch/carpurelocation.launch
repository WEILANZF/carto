<launch>

  <param name="/use_sim_time" value="false" />

  <node name="map_server" pkg="map_server" type="map_server" 
  args="/home/zzy/Downloads/mapekf.yaml" />

<!--加载机器人模型-->

  <param name="robot_description"

    textfile="$(find cartographer_ros)/urdf/cartest.urdf" />

<!--发布tf-->

  <node name="robot_state_publisher" pkg="robot_state_publisher"

    type="robot_state_publisher" />

  <!--启动建图节点-->

  <node name="cartographer_node" pkg="cartographer_ros"

      type="cartographer_node" args="

          -configuration_directory $(find cartographer_ros)/configuration_files

          -configuration_basename carpurelocation.lua     

          -load_state_filename /home/zzy/Downloads/mapekf.pbstream"

      output="screen">

 <!--重映射话题-->
    <remap from="/imu" to="/handsfree/imu" />
    <remap from="odom" to="/odometry/filtered" /> 
    <remap from="/scan" to="scan" />

  </node>

 <!--需要注释下面所示文件的源码，然后重新编译-->

<!--cartographer_ros/cartographer_ros/occupancy_grid_node_main.cc //occupancy_grid_publisher_.publish(*msg_ptr); /-->

 <!--发布地图-->

 <!-- <node name="cartographer_occupancy_grid_node" pkg="cartographer_ros"

      type="cartographer_occupancy_grid_node" args="-resolution 0.05" />-->

<!--启动RVIZ-->

 <!--node name="rviz" pkg="rviz" type="rviz" required="true"

      args="-d $(find cartographer_ros)/configuration_files/demo_2d.rviz" /-->

</launch>
